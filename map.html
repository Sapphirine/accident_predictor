<!doctype html>
<html>
  <head>
    
    <title>Map - Accident Predictor</title>
    
    <link rel=stylesheet href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />
    <style type="text/css">
      html, body, #map {
        height: 100%;
        padding: 0;
        margin: 0;
      }
    </style>
  </head>
  <body>
    
<div id="map"></div>
<script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>
<script>
      // var map
      // var map = new L.Map('map', {
      //   center: [40.792128,-73.973091],
      //   zoom: 12
      // });

      cartodb.createVis('map', 'http://documentation.cartodb.com/api/v2/viz/2b13c956-e7c1-11e2-806b-5404a6a683d5/viz.json')
        .done(function(vis, layers) {
          // layer 0 is the base layer, layer 1 is cartodb layer
          // when setInteraction is disabled featureOver is triggered
          layers[1].setInteraction(true);
          layers[1].on('featureOver', function(e, latlng, pos, data, layerNumber) {
            console.log(e, latlng, pos, data, layerNumber);
          });

          // you can get the native map to work with it
          var map = vis.getNativeMap();

          // now, perform any operations you need, e.g. assuming map is a L.Map object:
          map.setZoom(12);
          map.panTo([40.792128,-73.973091]);

      //     cartodb.createLayer(map, {
      //       user_name: 'jpcolomer',
      //       type: 'cartodb',
      //       sublayers: [{
      //         sql: "SELECT * FROM aggregated_data WHERE conditions='Rain' AND day='Monday'",
      //         cartocss: '#table_name {marker-fill: #F0F0F0;}'
      //       }]
      //     })
      //     .addTo(map) // add the layer to our map which already contains 1 sublayer
      //     .done(function(layer) {

      //   // create and add a new sublayer
      //   // layer.createSubLayer({
      //   //   sql: "SELECT * FROM aggregated_data limit 1",
      //   //   cartocss: '#table_name {marker-fill: #F0F0F0;}'
      //   // });

      //   // change the query for the first layer
      //   // layer.getSubLayer(0).setSQL("SELECT * FROM aggregated_data limit 10");
      // });



        });

      // cartodb.createLayer(map, 'https://jpcolomer.cartodb.com/api/v2/viz/db79b380-a15c-11e5-a9b0-0ea31932ec1d/viz.json')
      //   .addTo(map)
      //   .on('done', function(layer) {
      //     //do stuff
      //   })
      //   .on('error', function(err) {
      //     alert("some error occurred: " + err);
      //   });


          

    </script>

  </body>
</html>